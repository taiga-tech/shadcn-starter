# タスク完了時のチェックリスト

## 必須実行コマンド（順序重要）

### 1. 型チェック

```bash
pnpm check-types
```

- TypeScriptの型エラーをすべて解決
- any型の使用を避ける
- 適切な型注釈を追加

### 2. ESLintチェック

```bash
pnpm lint
```

- すべてのESLintエラーを解決（ignore使用禁止）
- ワーニング数をゼロにする
- 未使用変数・インポートを削除
- console.logの削除確認

### 3. ファイル命名規則チェック

```bash
pnpm lint:ls
```

- kebab-case命名規則の遵守
- 適切なファイル拡張子の使用

### 4. テスト実行

```bash
pnpm test
```

- 全テストがパス
- 新機能にはテストを追加
- 既存テストが破綻していないか確認

### 5. ビルド確認

```bash
pnpm build
```

- ビルドエラーがないことを確認
- バンドルサイズが適切な範囲内
- Next.js最適化が正常に動作

## 品質チェックポイント

### コードスタイル

- [ ] Prettierによる自動フォーマット実行済み
- [ ] インポート順序が正しい
- [ ] cn()関数によるclassName結合
- [ ] 適切なコンポーネント分割（300行以下）

### パフォーマンス

- [ ] 不要な再レンダリングを避けるメモ化
- [ ] 定数をコンポーネント外に配置
- [ ] 動的importによる遅延読み込み
- [ ] RSC（React Server Components）の活用

### アクセシビリティ

- [ ] セマンティックHTMLの使用
- [ ] ARIA属性の適切な設定
- [ ] キーボード操作サポート
- [ ] カラーコントラスト比の確認

### セキュリティ

- [ ] 入力値のバリデーション（Zod使用）
- [ ] XSS対策の実装
- [ ] 機密情報の適切な処理
- [ ] Server Actionsの適切な権限チェック

## Git コミット前の確認

### ファイル確認

```bash
git status
git diff
```

- [ ] 意図しないファイルの変更がないか
- [ ] .env等の機密ファイルが含まれていないか
- [ ] 一時ファイルやログファイルが含まれていないか

### コミットメッセージ

- [ ] 変更内容を明確に記述
- [ ] 英語での簡潔な説明
- [ ] 関連するissue番号を記載

## デプロイ前の追加チェック

### パフォーマンス分析

```bash
pnpm build --analyze  # apps/web内で実行
```

- [ ] バンドルサイズが適切
- [ ] 不要な依存関係がない
- [ ] コード分割が適切に動作

### E2Eテスト

```bash
pnpm test:e2e
```

- [ ] 主要な機能フローが動作
- [ ] 異なるブラウザでの動作確認
- [ ] モバイル表示の確認

## トラブルシューティング

### よくある問題と解決方法

**型エラーが解決しない場合:**

```bash
# TypeScript キャッシュクリア
rm -rf .next
rm -rf node_modules/.cache
pnpm install
```

**ESLintエラーが大量発生:**

```bash
# 段階的修正
pnpm lint --fix
# 手動で残りのエラーを修正
```

**テストが失敗する場合:**

```bash
# テストキャッシュクリア
pnpm test --clearCache
# 特定のテストファイルのみ実行
pnpm test -- --testPathPattern=specific-test.test.ts
```

**ビルドエラーの対処:**

```bash
# 依存関係の再インストール
pnpm clean-install
# Next.jsキャッシュクリア
rm -rf .next
```
